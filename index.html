<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Maven-auto-upgrade-script by Yomoni</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Maven-auto-upgrade-script</h1>
        <h2>Maven auto upgrade script to auto-generate GitHub pull requests with version upgrades.</h2>
        <a href="https://github.com/Yomoni/maven-auto-upgrade-script" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="maven-auto-upgrade-script" class="anchor" href="#maven-auto-upgrade-script" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>maven-auto-upgrade-script</h1>

<p><a href="https://github.com/Yomoni/maven-auto-upgrade-script/blob/master/LICENSE"><img src="https://img.shields.io/github/license/Yomoni/maven-auto-upgrade-script.svg" alt="License"></a></p>

<p>Maven auto upgrade script check for any existing maven dependency and/or plugin upgrade. For each upgrade, a new branch is created with a single upgrade and a pull request is submitted from this branch.</p>

<hr>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<p>Clone the git repository with this command:</p>

<div class="highlight highlight-source-shell"><pre>git clone https://github.com/Yomoni/maven-auto-upgrade-script.git</pre></div>

<h2>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Requirements</h2>

<ul>
<li>
<em>git</em> must be installed, version 2.3 or above is recommended</li>
<li>Maven must be installed and the <em>mvn</em> command must works (in the PATH environment variable with the associated JAVA_HOME/JDK)</li>
<li>
<a href="https://hub.github.com/"><em>hub</em></a> must be installed and configured to generate pull-request directly in GitHub</li>
</ul>

<h2>
<a id="launch" class="anchor" href="#launch" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Launch</h2>

<h3>
<a id="single-repository-check" class="anchor" href="#single-repository-check" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Single repository check</h3>

<p>Check of dependencies upgrades on a remote git repository (with a temporary clone) or an local existing one can be done with this command:</p>

<div class="highlight highlight-source-shell"><pre>maven-auto-upgrade.sh <span class="pl-k">&lt;</span>git repository URL<span class="pl-k">|</span>git directory<span class="pl-k">&gt;</span> [<span class="pl-k">&lt;</span>target branch<span class="pl-k">&gt;</span>]</pre></div>

<p>If no target branch is specified, the default branch <em>master</em> is used. If the repository already exists, no <code>bash git pull</code> command is used to synchronize the repository.</p>

<p>Execution example command:</p>

<div class="highlight highlight-source-shell"><pre>maven-auto-upgrade.sh https://github.com/Sylvain-Bugat/RundeckMonitor.git</pre></div>

<p>output of this example:</p>

<div class="highlight highlight-source-shell"><pre>Verifying Git version:...[OK] -<span class="pl-k">&gt;</span> git version 2.7.0
Verifying GitHub Hub version:...[OK] found hub <span class="pl-c1">command</span> -<span class="pl-k">&gt;</span> hub version 2.2.2
Verifying Maven version:...[OK] -<span class="pl-k">&gt;</span> Apache Maven 3.3.3
Cloning Sylvain-Bugat/RundeckMonitor repository:...[OK]
Checking property version upgrades:...[OK] -<span class="pl-k">&gt;</span> 1 upgrade(s) found

Upgrading slf4j.version property from 1.7.18 to 1.7.19
Checkout of main branch master:...[OK]
Checking existence of the remote slf4j.version_upgrade_1.7.18_to_1.7.19:...[OK]
Modifying property assertj.version:...[OK]
Create and checkout branch slf4j.version_upgrade_1.7.18_to_1.7.19:...[OK]
Adding modified pom.xml to commit files:...[OK]
Commiting modified pom.xml files:...[OK]
Pushing the commit to the git repository:...[OK]
Creating the associated GitHub pull-request:...[OK] -<span class="pl-k">&gt;</span> https://github.com/Sylvain-Bugat/RundeckMonitor/pull/33
Deleting clone /cygdrive/c/maven-auto-upgrade-script/RundeckMonitor:...[OK]
</pre></div>

<p>Created pull request on this example: <a href="https://github.com/Sylvain-Bugat/RundeckMonitor/pull/33">https://github.com/Sylvain-Bugat/RundeckMonitor/pull/33</a></p>

<h3>
<a id="multiple-repository-check" class="anchor" href="#multiple-repository-check" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Multiple repository check</h3>

<p>The check of multiple existing/remote git repository can be done with this command:</p>

<div class="highlight highlight-source-shell"><pre>maven-multi-repository-auto-upgrade.sh <span class="pl-k">&lt;</span>git repository URL<span class="pl-k">|</span>git directory<span class="pl-k">&gt;</span> [<span class="pl-k">&lt;</span>git repository URL<span class="pl-k">|</span>git directory<span class="pl-k">&gt;</span>] [...]</pre></div>

<p>In multiple repository check, the default branche <em>master</em> is used</p>

<p>Execution example command:</p>

<div class="highlight highlight-source-shell"><pre>maven-multi-repository-auto-upgrade.sh https://github.com/Sylvain-Bugat/RundeckMonitor.git https://github.com/Sylvain-Bugat/aws-ec2-start-stop-tools.git</pre></div>

<p>Command output exemple:</p>

<div class="highlight highlight-source-shell"><pre>Verifying Git version:...[OK] -<span class="pl-k">&gt;</span> git version 2.7.0
Verifying GitHub Hub version:...[OK] found hub <span class="pl-c1">command</span> -<span class="pl-k">&gt;</span> hub version 2.2.2
Verifying Maven version:...[OK] -<span class="pl-k">&gt;</span> Apache Maven 3.3.3

Check Maven dependencies upgrades of https://github.com/Sylvain-Bugat/RundeckMonitor.git repository
Cloning Sylvain-Bugat/RundeckMonitor repository:...[OK]
Checking property version upgrades:...[OK] -<span class="pl-k">&gt;</span> 0 upgrade(s) found
Deleting clone /cygdrive/c/maven-auto-upgrade-script/RundeckMonitor directory:...[OK]

Check Maven dependencies upgrades of https://github.com/Sylvain-Bugat/aws-ec2-start-stop-tools.git repository
Cloning Sylvain-Bugat/aws-ec2-start-stop-tools repository:...[OK]
Checking property version upgrades:...[OK] -<span class="pl-k">&gt;</span> 1 upgrade(s) found

Upgrading assertj.version property from 2.3.0 to 2.4.0
Checkout of main branch master:...[OK]
Checking existence of the remote branch assertj.version_upgrade_2.3.0_to_2.4.0:...[OK]
Modifying property assertj.version:...[OK]
Create and checkout branch 2.3.0_to_2.4.0:...[OK]
Adding modified pom.xml to commit files:...[OK]
Commiting modified pom.xml files:...[OK]
Pushing the commit to the git repository:...[OK]
Creating the associated GitHub pull-request:...[OK] -<span class="pl-k">&gt;</span> https://github.com/Sylvain-Bugat/aws-ec2-start-stop-tools/pull/52
Deleting clone /cygdrive/c/maven-auto-upgrade-script/aws-ec2-start-stop-tools directory:...[OK]</pre></div>

<h2>
<a id="troubleshooting" class="anchor" href="#troubleshooting" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Troubleshooting</h2>

<h3>
<a id="git-cannot-commit-to-the-cloned-repository" class="anchor" href="#git-cannot-commit-to-the-cloned-repository" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><em>git</em> cannot commit to the cloned repository</h3>

<p>This error occurs if no credentials/user settings are permanently used. Try to execute a <code>git push</code> command before executing the script to temporary remember GitHub access or <a href="https://help.github.com/articles/caching-your-github-password-in-git/">setup a git password cache</a>. </p>

<h3>
<a id="git-cannot-clone-private-repository" class="anchor" href="#git-cannot-clone-private-repository" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><em>git</em> cannot clone private repository</h3>

<p>Error output example:</p>

<div class="highlight highlight-source-shell"><pre>Verifying Git version:...[OK] -<span class="pl-k">&gt;</span> git version 2.7.0
Verifying GitHub Hub version:...[OK] found hub <span class="pl-c1">command</span> -<span class="pl-k">&gt;</span> hub version 2.2.2
Verifying Maven version:...[OK] -<span class="pl-k">&gt;</span> Apache Maven 3.3.3
Cloning Sylvain-Bugat/private-repo repository:...[FAILED]
Cloning into <span class="pl-s"><span class="pl-pds">'</span>private-repo<span class="pl-pds">'</span></span>...
fatal: could not <span class="pl-c1">read</span> Username <span class="pl-k">for</span> <span class="pl-s"><span class="pl-pds">'</span>https://github.com<span class="pl-pds">'</span></span>: terminal prompts disabled</pre></div>

<p>Same solution as the previous question, try to execute a <code>git push</code> command before executing the script to temporary remember GitHub access.</p>

<h3>
<a id="hub-cannot-create-the-pull-request-on-github" class="anchor" href="#hub-cannot-create-the-pull-request-on-github" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><em>hub</em> cannot create the pull request on GitHub</h3>

<p>Try to execute a hub command like this in a already cloned git repository:</p>

<pre><code>hub ci-status
</code></pre>

<p>If it's the first hub execution, user name/password are required to create to register a <a href="https://github.com/settings/tokens">personal access token</a> on your GitHub account.</p>

<h3>
<a id="upgrade-i-refusedont-want-are-spammed" class="anchor" href="#upgrade-i-refusedont-want-are-spammed" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Upgrade I refuse/don't want are spammed</h3>

<p>At each execution a pull request is created if a new version is found and if an existing branch with the same version upgread is not already found.</p>

<p>If you don't want an upgrade or you don't want to apply it right now you can keep the associated branch alive as long as you want. But for some strange/incompatible version the dependency version may be completely ignored.</p>

<h3>
<a id="not-release-version-upgrade-are-generated" class="anchor" href="#not-release-version-upgrade-are-generated" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Not release version upgrade are generated</h3>

<p>There are some case were not release version are detected even if only release repostory are used:</p>

<ul>
<li>Alpha/beta versions (A)</li>
<li>Release canditate versions (RC)</li>
<li>Draft versions</li>
<li>Milestone versions (M)</li>
</ul>

<p>To ignore versions of dependencies and/or plugins, the versions plugin configuration can be modified. Such configuration example on <a href="https://github.com/Sylvain-Bugat/RundeckMonitor/blob/master/dependencies-check-rules.xml">Rundeck Monitor</a>.</p>

<h3>
<a id="some-upgrade-are-not-detected" class="anchor" href="#some-upgrade-are-not-detected" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Some upgrade are not detected</h3>

<p>These scripts uses <code>mvn versions:display-plugin-updates  versions:display-property-updates</code> to find dependency/plugin version upgrade. Dependency version with direct version configuration like this cannot be detected and upgraded:</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;org.slf4j&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;slf4j-ext&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;1.7.19&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>

<h3>
<a id="my-git-repository-is-not-on-github" class="anchor" href="#my-git-repository-is-not-on-github" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>My git repository is not on GitHub</h3>

<p>These scripts can be used without the <a href="https://hub.github.com/"><em>hub</em></a> command, in this case, branch with new dependecy/plugin version are commited be no associted pull request can be created and the merge must be done manually.</p>

<h3>
<a id="another-issuebug-feature-requests-or-questions" class="anchor" href="#another-issuebug-feature-requests-or-questions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Another issue/bug, feature requests or questions?</h3>

<p>Issues, bugs, and feature requests should be submitted on <a href="https://github.com/Yomoni/maven-auto-upgrade-script/issues">GitHub maven-auto-upgrade-script issue tracking</a>.</p>

<h2>
<a id="thanks-to" class="anchor" href="#thanks-to" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Thanks to</h2>

<ul>
<li>
<a href="https://maven.apache.org/">Maven</a> <img class="emoji" title=":construction_worker:" alt=":construction_worker:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f477.png" height="20" width="20" align="absmiddle">
</li>
<li>
<a href="http://www.mojohaus.org/versions-maven-plugin/">Versions Maven plugin</a> <img class="emoji" title=":arrow_double_up:" alt=":arrow_double_up:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/23eb.png" height="20" width="20" align="absmiddle">
</li>
<li>
<a href="https://git-scm.com/"><em>git</em></a> and <a href="https://hub.github.com/"><em>hub</em></a> <img class="emoji" title=":smirk:" alt=":smirk:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f60f.png" height="20" width="20" align="absmiddle">
</li>
<li>
<a href="https://github.com/">GitHub</a> <img class="emoji" title=":laughing:" alt=":laughing:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f606.png" height="20" width="20" align="absmiddle">
</li>
<li>
<a href="https://www.yomoni.fr/">Yomoni</a> <img class="emoji" title=":moneybag:" alt=":moneybag:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4b0.png" height="20" width="20" align="absmiddle">
</li>
</ul>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/Yomoni/maven-auto-upgrade-script/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/Yomoni/maven-auto-upgrade-script/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/Yomoni/maven-auto-upgrade-script"></a> is maintained by <a href="https://github.com/Yomoni">Yomoni</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
